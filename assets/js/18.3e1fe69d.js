(window.webpackJsonp=window.webpackJsonp||[]).push([[18],{357:function(t,s,e){"use strict";e.r(s);var a=e(0),n=Object(a.a)({},(function(){var t=this,s=t._self._c;return s("ContentSlotsDistributor",{attrs:{"slot-key":t.$parent.slotKey}},[s("h3",{attrs:{id:"_1-go-get命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-go-get命令"}},[t._v("#")]),t._v(" 1. go get命令")]),t._v(" "),s("p",[t._v("go get 命令可以借助代码管理工具通过远程拉取或更新代码包及其依赖包到"),s("code",[t._v("gopath")]),t._v("路径下，并自动完成编译和安装。整个过程就像安装一个 App 一样简单。\nexample:")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("go get github.com/spf13/viper\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("p",[t._v("如上命令则是将github上中的viper包下载到本地"),s("code",[t._v("gopath")]),t._v("路径，在对应目录"),s("code",[t._v("$gopath/src/github.com/sfp13/viper")]),t._v("即可看到对应代码。")]),t._v(" "),s("p",[t._v("这个命令可以动态获取远程代码包，目前支持的有 "),s("code",[t._v("BitBucket、GitHub、Google Code 和 Launchpad")]),t._v("。在使用 go get 命令前，需要安装与远程包匹配的代码管理工具，如 Git、SVN、HG 等，参数中需要提供一个包名。")]),t._v(" "),s("p",[t._v("这个命令在内部实际上分成了两步操作：第一步是下载源码包，第二步是执行 go install。")]),t._v(" "),s("p",[t._v("下载源码包的 go 工具会自动根据不同的域名调用不同的源码工具，对应关系如下：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("名称")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("主命令")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("说明")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Mercurial")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("hg")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Mercurial是一种轻量级分布式版本控制系统，采用Python语言实现，易于学习和使用，扩展性强。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Git")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("git")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Git最开始是Linux Torvalds为了帮助管理 Linux 内核开发而开发的一个开源的分布式版本控制软件。但现在已被广泛使用。它是被用来进行有效、高速的各种规模项目的版本管理。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Subversion")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("svn")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Subversion是一个版本控制系统，也是第一个将分支概念和功能纳入到版本控制模型的系统。但相对于Git和Mercurial而言，它只算是传统版本控制系统的一员。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("Bazaar")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("bzr")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("Bazaar是一个开源的分布式版本控制系统。但相比而言，用它来作为VCS的项目并不多。")])])])]),t._v(" "),s("h4",{attrs:{id:"_1-1-常用参数"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-1-常用参数"}},[t._v("#")]),t._v(" 1.1. 常用参数")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("标记名称")]),t._v(" "),s("th",{staticStyle:{"text-align":"left"}},[t._v("标记描述")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-d")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("让命令程序只执行下载动作，而不执行安装动作。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-f")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("仅在使用"),s("code",[t._v("-u")]),t._v("标记时才有效。该标记会让命令程序忽略掉对已下载代码包的导入路径的检查。如果下载并安装的代码包所属的项目是你从别人那里Fork过来的，那么这样做就尤为重要了。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-fix")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("让命令程序在下载代码包后先执行修正动作，而后再进行编译和安装。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-insecure")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("允许命令程序使用非安全的scheme（如HTTP）去下载指定的代码包。如果你用的代码仓库（如公司内部的Gitlab）没有HTTPS支持，可以添加此标记。请在确定安全的情况下使用它。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-t")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("让命令程序同时下载并安装指定的代码包中的测试源码文件中依赖的代码包。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-u")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("让命令利用网络来更新已有代码包及其依赖包。默认情况下，该命令只会从网络上下载本地不存在的代码包，而不会更新已有的代码包。")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-v")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("打印出那些下载的代码包的名字")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[t._v("-x")]),t._v(" "),s("td",{staticStyle:{"text-align":"left"}},[t._v("打印出整个过程使用的命令")])])])]),t._v(" "),s("h4",{attrs:{id:"_1-2-下载特定分支"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-2-下载特定分支"}},[t._v("#")]),t._v(" 1.2. 下载特定分支")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("go get 项目包路径@"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("(")]),t._v("分支名或提交id"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v(")")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 默认go1版本 其次master")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"_1-3-手动导入包"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-3-手动导入包"}},[t._v("#")]),t._v(" 1.3. 手动导入包")]),t._v(" "),s("p",[t._v("可手动到"),s("code",[t._v("$gopath/src")]),t._v("路径进行"),s("code",[t._v("git clone")]),t._v("等操作进行手动导入包。")]),t._v(" "),s("h4",{attrs:{id:"_1-4-常见错误"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_1-4-常见错误"}},[t._v("#")]),t._v(" 1.4 常见错误")]),t._v(" "),s("p",[t._v("由于"),s("code",[t._v("http")]),t._v("协议使用"),s("code",[t._v("git")]),t._v("系列操作的时候，需要输入密码，但是由于go默认不进行交互，所以还是会导致最终结果失败。\n错误如下：")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("get "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx.fengyuwusong.cn/basic_dev_libs/go_template"')]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" found meta tag get.metaImport"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("{")]),t._v("Prefix:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"xxx.fengyuwusong.cn/basic_dev_libs/go_template"')]),t._v(", VCS:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"git"')]),t._v(", RepoRoot:"),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"http://xxx.fengyuwusong.cn/basic_dev_libs/go_template.git"')]),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("}")]),t._v(" at //xxx.fengyuwusong.cn/basic_dev_libs/go_template?go-get"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\ngo get xxx.fengyuwusong.cn/basic_dev_libs/go_template: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("git")]),t._v(" ls-remote "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-q")]),t._v(" http://xxx.fengyuwusong.cn/basic_dev_libs/go_template.git "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" /Users/fengyuwusong/code/gopath/pkg/mod/cache/vcs/bf5a86f855b001622b2d2fe3a7b0447bf64efb8d09620ba2443dd04f7e0ffe44: "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("exit")]),t._v(" status "),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("128")]),t._v(":\n        fatal: could not "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("read")]),t._v(" Username "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'http://xxx.fengyuwusong.cn'")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(":")]),t._v(" terminal prompts disabled\nConfirm the "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("import")]),t._v(" path was entered correctly.\nIf this is a private repository, see https://golang.org/doc/faq"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#git_https for additional information.")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br")])]),s("p",[t._v("以上错误我们可以通过以下两种方式来解决：")]),t._v(" "),s("div",{staticClass:"language- line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v('方案一\n临时解法：手动输入用户名密码\n\nenv GIT_TERMINAL_PROMPT=1 go get xxx.com/xxx/xxx\n\n方案二\n长期解法：使用已经配置好的git密钥\n\n以GITHUB为例\n\ngit config --global --add url."git@github.com:".insteadOf "https://github.com/"\n')])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br")])]),s("h3",{attrs:{id:"_2-govendor"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-govendor"}},[t._v("#")]),t._v(" 2. govendor")]),t._v(" "),s("p",[t._v("golang工程的依赖包经常使用go get命令来获取，例如：go get github.com/kardianos/govendor ，会将依赖包下载到"),s("code",[t._v("GOPATH")]),t._v("的路径下。")]),t._v(" "),s("p",[t._v("常用的依赖包管理工具有"),s("code",[t._v("godep")]),t._v("，"),s("code",[t._v("govendor")]),t._v("等，在Golang1.5之后，Go提供了 "),s("code",[t._v("GO15VENDOREXPERIMENT")]),t._v(" 环境变量(Go 1.6版本默认开启该环境变量)，用于将go build时的应用路径搜索调整成为 "),s("code",[t._v("当前项目目录/vendor")]),t._v(" 目录方式。通过这种形式，我们可以实现类似于 "),s("code",[t._v("godep")]),t._v(" 方式的项目依赖管理。")]),t._v(" "),s("h4",{attrs:{id:"_2-1-安装"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-1-安装"}},[t._v("#")]),t._v(" 2.1. 安装")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("go get "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" github.com/kardianos/govendor\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br")])]),s("h4",{attrs:{id:"_2-2-使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-2-使用"}},[t._v("#")]),t._v(" 2.2. 使用")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#进入到项目目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("cd")]),t._v(" /home/gopath/src/mytool\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#初始化vendor目录")]),t._v("\ngovendor init\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#查看vendor目录")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("root@CC54425A mytool"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ls")]),t._v("\ncommands  main.go  vendor  mytool_test.sh\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#将GOPATH中本工程使用到的依赖包自动移动到vendor目录中")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#说明：如果本地GOPATH没有依赖包，先go get相应的依赖包")]),t._v("\ngovendor "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" +external\n或使用缩写： govendor "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" +e \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#Go 1.6以上版本默认开启 GO15VENDOREXPERIMENT 环境变量，可忽略该步骤。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#通过设置环境变量 GO15VENDOREXPERIMENT=1 使用vendor文件夹构建文件。")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#可以选择 export GO15VENDOREXPERIMENT=1 或 GO15VENDOREXPERIMENT=1 go build 执行编译")]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("export")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GO15VENDOREXPERIMENT")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token number"}},[t._v("1")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("h4",{attrs:{id:"_2-3-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_2-3-常用命令"}},[t._v("#")]),t._v(" 2.3. 常用命令")]),t._v(" "),s("p",[t._v("常见的命令如下，格式为 "),s("code",[t._v("govendor COMMAND")]),t._v("。")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",{staticStyle:{"text-align":"left"}},[t._v("命令")]),t._v(" "),s("th",[t._v("功能")])])]),t._v(" "),s("tbody",[s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("init")])]),t._v(" "),s("td",[t._v("初始化 vendor 目录")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("list")])]),t._v(" "),s("td",[t._v("列出所有的依赖包")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("add")])]),t._v(" "),s("td",[t._v("添加包到 vendor 目录，如 govendor add +external 添加所有外部包")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("add PKG_PATH")])]),t._v(" "),s("td",[t._v("添加指定的依赖包到 vendor 目录")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("update")])]),t._v(" "),s("td",[t._v("从 $GOPATH 更新依赖包到 vendor 目录")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("remove")])]),t._v(" "),s("td",[t._v("从 vendor 管理中删除依赖")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("status")])]),t._v(" "),s("td",[t._v("列出所有缺失、过期和修改过的包")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("fetch")])]),t._v(" "),s("td",[t._v("添加或更新包到本地 vendor 目录")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("sync")])]),t._v(" "),s("td",[t._v("本地存在 vendor.json 时候拉去依赖包，匹配所记录的版本")])]),t._v(" "),s("tr",[s("td",{staticStyle:{"text-align":"left"}},[s("code",[t._v("get")])]),t._v(" "),s("td",[t._v("类似 "),s("code",[t._v("go get")]),t._v(" 目录，拉取依赖包到 vendor 目录")])])])]),t._v(" "),s("p",[t._v("包状态：")]),t._v(" "),s("table",[s("thead",[s("tr",[s("th",[t._v("状态")]),t._v(" "),s("th",{staticStyle:{"text-align":"center"}},[t._v("缩写状态")]),t._v(" "),s("th",[t._v("缩写含义")])])]),t._v(" "),s("tbody",[s("tr",[s("td",[t._v("+local")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("l")]),t._v(" "),s("td",[t._v("本地包，项目自身的包组织")])]),t._v(" "),s("tr",[s("td",[t._v("+external")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("e")]),t._v(" "),s("td",[t._v("外部包，被"),s("code",[t._v("$GOPATH")]),t._v("管理，但不在vendor目录下")])]),t._v(" "),s("tr",[s("td",[t._v("+vendor")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("v")]),t._v(" "),s("td",[t._v("已被govendor管理的包，在vendor目录下")])]),t._v(" "),s("tr",[s("td",[t._v("+std")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("s")]),t._v(" "),s("td",[t._v("标准库的包")])]),t._v(" "),s("tr",[s("td",[t._v("+unused")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("u")]),t._v(" "),s("td",[t._v("未使用的包，即包在vendor目录下，但在项目中并没有使用")])]),t._v(" "),s("tr",[s("td",[t._v("+missing")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("m")]),t._v(" "),s("td",[t._v("代码应用了依赖包，但该包未找到")])]),t._v(" "),s("tr",[s("td",[t._v("+program")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}},[t._v("p")]),t._v(" "),s("td",[t._v("主程序包，可编译为执行文件")])]),t._v(" "),s("tr",[s("td",[t._v("+outside")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",[t._v("外部包或缺失的包")])]),t._v(" "),s("tr",[s("td",[t._v("+all")]),t._v(" "),s("td",{staticStyle:{"text-align":"center"}}),t._v(" "),s("td",[t._v("所有包")])])])]),t._v(" "),s("p",[t._v("example：")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 将外部包打入vendor目录")]),t._v("\ngovendor "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" +e\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br")])]),s("h3",{attrs:{id:"_3-go-mod"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-go-mod"}},[t._v("#")]),t._v(" 3. go mod")]),t._v(" "),s("p",[t._v("从 Go1.11 开始，golang 官方支持了新的依赖管理工具"),s("code",[t._v("go mod")]),t._v("。")]),t._v(" "),s("p",[t._v("其本质为将包下载到"),s("code",[t._v("$gopath/pkg/mod")]),t._v("目录")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("~/code/gopath/pkg/mod: "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("ls")]),t._v("\ncache               github.com          go.uber.org         google.golang.org   honnef.co\ncloud.google.com    go.etcd.io          golang.org          gopkg.in\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h4",{attrs:{id:"_3-1-常用命令"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-1-常用命令"}},[t._v("#")]),t._v(" 3.1. 常用命令")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("➜  ~ go mod\nGo mod provides access to operations on modules.\n \nNote that support "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" modules is built into all the go commands,\nnot just "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'go mod'")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v(" For example, day-to-day adding, removing, upgrading,\nand downgrading of dependencies should be "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("done")]),t._v(" using "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'go get'")]),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v(".")]),t._v("\nSee "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v("'go help modules'")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" an overview of module functionality.\n \nUsage:\n \n\tgo mod "),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("<")]),t._v("command"),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v(">")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("[")]),t._v("arguments"),s("span",{pre:!0,attrs:{class:"token punctuation"}},[t._v("]")]),t._v("\n \nThe commands are:\n \n\tdownload    download modules to "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("local")]),t._v(" cache   下载包到本地缓存\n\tedit        edit go.mod from tools or scripts 编写go.mod 文件\n\tgraph       print module requirement graph 打印依赖关系图\n\tinit        initialize new module "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("in")]),t._v(" current directory 初始化当前目录\n\ttidy        "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("add")]),t._v(" missing and remove unused modules 添加丢失和移除无用的包\n\tvendor      "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("make")]),t._v(" vendored copy of dependencies  打包vendor目录\n\tverify      verify dependencies have expected content 验证依赖内容\n\twhy         explain why packages or modules are needed 解释为什么依赖此包\n \nUse "),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"go help mod <command>"')]),t._v(" "),s("span",{pre:!0,attrs:{class:"token keyword"}},[t._v("for")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("more")]),t._v(" information about a command.\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br"),s("span",{staticClass:"line-number"},[t._v("20")]),s("br"),s("span",{staticClass:"line-number"},[t._v("21")]),s("br"),s("span",{staticClass:"line-number"},[t._v("22")]),s("br"),s("span",{staticClass:"line-number"},[t._v("23")]),s("br"),s("span",{staticClass:"line-number"},[t._v("24")]),s("br")])]),s("h4",{attrs:{id:"_3-2-使用"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-2-使用"}},[t._v("#")]),t._v(" 3.2. 使用")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("go mod init "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 在项目目录下初始化 生成go.mod文件")]),t._v("\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("#  build 和test会自动编辑go.mod文件 导入依赖包")]),t._v("\ngo build xxx.go\ngo "),s("span",{pre:!0,attrs:{class:"token builtin class-name"}},[t._v("test")]),t._v(" xxx.go\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# ... 编辑go.mod文件 导入你需要的包然后执行")]),t._v("\ngo mod download\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 或进行以下命令 添加missing包及移除无用包")]),t._v("\ngo mod tidy \n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 打包到本地并部署")]),t._v("\ngo mod vendor\n\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 其他命令")]),t._v("\ngo list "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" all "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 列出所有直接或间接使用的包的最终版本")]),t._v("\ngo list "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-m")]),t._v(" all "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 查看所有可用于升级的补丁")]),t._v("\ngo get xxx "),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 导入需要的包 会自动编辑go.mod文件添加该包")]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br"),s("span",{staticClass:"line-number"},[t._v("16")]),s("br"),s("span",{staticClass:"line-number"},[t._v("17")]),s("br"),s("span",{staticClass:"line-number"},[t._v("18")]),s("br"),s("span",{staticClass:"line-number"},[t._v("19")]),s("br")])]),s("h4",{attrs:{id:"_3-3-使用代理"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-3-使用代理"}},[t._v("#")]),t._v(" 3.3. 使用代理")]),t._v(" "),s("p",[t._v("由于一些总所周知的原因，在国内有一些包是无法下载的，所以这时候需要设置第三方代理来对包进行拉取。")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 使用代理")]),t._v("\ngo "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOPROXY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"https://goproxy.cn"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 直连")]),t._v("\ngo "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOPROXY")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"direct"')]),t._v("\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br")])]),s("p",[t._v("但是有一些包我们是存在自建仓库的，那么这时候需要设置"),s("code",[t._v("GOPRIVATE")]),t._v("跳过代理。")]),t._v(" "),s("div",{staticClass:"language-shell line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-shell"}},[s("code",[t._v("go "),s("span",{pre:!0,attrs:{class:"token function"}},[t._v("env")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-w")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token assign-left variable"}},[t._v("GOPRIVATE")]),s("span",{pre:!0,attrs:{class:"token operator"}},[t._v("=")]),s("span",{pre:!0,attrs:{class:"token string"}},[t._v('"*.fengyuwusong.cn"')]),t._v("\n"),s("span",{pre:!0,attrs:{class:"token comment"}},[t._v("# 此时导入该包将不会使用代理")]),t._v("\ngo get "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-u")]),t._v(" "),s("span",{pre:!0,attrs:{class:"token parameter variable"}},[t._v("-v")]),t._v(" test.fengyuwusong.cn\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br")])]),s("h4",{attrs:{id:"_3-4-go-mod"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-4-go-mod"}},[t._v("#")]),t._v(" 3.4. go.mod")]),t._v(" "),s("ul",[s("li",[s("code",[t._v("module")]),t._v(" 语句指定包的名字（路径）")]),t._v(" "),s("li",[s("code",[t._v("require")]),t._v(" 语句指定的依赖项模块")]),t._v(" "),s("li",[s("code",[t._v("replace")]),t._v(" 语句可以替换依赖项模块")]),t._v(" "),s("li",[s("code",[t._v("exclude")]),t._v(" 语句可以忽略依赖项模块")])]),t._v(" "),s("p",[s("strong",[t._v("go.mod 文件样例")])]),t._v(" "),s("div",{staticClass:"language-mod line-numbers-mode"},[s("pre",{pre:!0,attrs:{class:"language-text"}},[s("code",[t._v("module fengyuwusong.cn/my/thing // 指明身份 模块中所有软件包导入前缀\n\ngo 1.12\n\n// 依赖包列表 不指定版本时 依赖所需最小版本\nrequire (\n    github.com/some/dependency v1.2.3\n    github.com/another/dependency/v4 v4.0.0 // indirect 意为间接使用\n)\n\n// replace 替换本地路径 当一些包不想上传远程或拉不下来的时候可以使用\nreplace example.com/some/dependency => example.com/some/dependency v1.2.3  // 替换为其他地址\nreplace example.com/original/import/path => /your/forked/import/path // 替换为本地路径\n\nexclude xxx.xx.com/test // 忽略此项依赖 很少使用\n")])]),t._v(" "),s("div",{staticClass:"line-numbers-wrapper"},[s("span",{staticClass:"line-number"},[t._v("1")]),s("br"),s("span",{staticClass:"line-number"},[t._v("2")]),s("br"),s("span",{staticClass:"line-number"},[t._v("3")]),s("br"),s("span",{staticClass:"line-number"},[t._v("4")]),s("br"),s("span",{staticClass:"line-number"},[t._v("5")]),s("br"),s("span",{staticClass:"line-number"},[t._v("6")]),s("br"),s("span",{staticClass:"line-number"},[t._v("7")]),s("br"),s("span",{staticClass:"line-number"},[t._v("8")]),s("br"),s("span",{staticClass:"line-number"},[t._v("9")]),s("br"),s("span",{staticClass:"line-number"},[t._v("10")]),s("br"),s("span",{staticClass:"line-number"},[t._v("11")]),s("br"),s("span",{staticClass:"line-number"},[t._v("12")]),s("br"),s("span",{staticClass:"line-number"},[t._v("13")]),s("br"),s("span",{staticClass:"line-number"},[t._v("14")]),s("br"),s("span",{staticClass:"line-number"},[t._v("15")]),s("br")])]),s("h4",{attrs:{id:"_3-5-http支持"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#_3-5-http支持"}},[t._v("#")]),t._v(" 3.5. http支持")]),t._v(" "),s("p",[t._v("目前"),s("code",[t._v("go mod")]),t._v("等导包相关操作并不支持"),s("code",[t._v("http")]),t._v("，但是有时公司的仓库并不支持"),s("code",[t._v("https")]),t._v("，这时候我们需要使用"),s("code",[t._v("go get -u -v -insecure xxx")]),t._v("导入此包。")]),t._v(" "),s("h3",{attrs:{id:"参考文章"}},[s("a",{staticClass:"header-anchor",attrs:{href:"#参考文章"}},[t._v("#")]),t._v(" 参考文章")]),t._v(" "),s("p",[s("a",{attrs:{href:"https://github.com/golang/go/wiki/Modules#when-should-i-use-the-replace-directive",target:"_blank",rel:"noopener noreferrer"}},[t._v("Go 1.11 Modules 官方文档"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"http://c.biancheng.net/view/123.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("go get命令——一键获取代码、编译并安装"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://www.cnblogs.com/liuzhongchao/p/9233177.html",target:"_blank",rel:"noopener noreferrer"}},[t._v("Golang包管理工具之govendor的使用"),s("OutboundLink")],1)]),t._v(" "),s("p",[s("a",{attrs:{href:"https://blog.csdn.net/jackgo73/article/details/90604180",target:"_blank",rel:"noopener noreferrer"}},[t._v("【Golang】go get报错：fatal: could not read Username ... terminal prompts disabled"),s("OutboundLink")],1)])])}),[],!1,null,null,null);s.default=n.exports}}]);